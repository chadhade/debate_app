<!-- <%= javascript_include_tag "short_polling" %> -->
<%= javascript_include_tag "voting" %>
<%= javascript_include_tag "exit_tracking" %>
<%= javascript_include_tag "timer_countdown" %>
<script src="http://localhost:8080/application.js" type="text/javascript" charset="utf-8"></script>

<!-- juggernaut subscribe to debates -->
<%= render :partial => "/debates/juggernaut_debates_subscribe.js", :locals => {:debates => @tracking_debates} %>

<h1>Tracking</h1>

<div id = "debatebody">
<% @tracking_debates.each do |debate| %>
  <div class="trackingdebatecontainer">
	
	<div class="containerpanel">
		<%= render :partial => "/debates/timers", :locals => {:debate_id =>  debate.id} %>
		<%= render :partial => "/debates/viewing", :locals => {:debate_id => debate.id} %>
	</div>
	<%= render :partial => "/debates/debate", :locals => {:debate => debate} %>
	<%= render :partial => "/debates/post_to_debate", :locals => {:debate => debate, :currentdebater => @currentdebater} %>
	<script>$.getScript("/debates/<%= debate.id %>.js"); // Initialize the timers for every debate</script>
	
  </div>
<% end %>
</div>
<script>
// This function assures that the javascript runs only once the whole page is loaded
	$(document).ready(function() {
		
		setTimeout("javascript_countdown.startTimers()", 6000); 
	});
</script>

